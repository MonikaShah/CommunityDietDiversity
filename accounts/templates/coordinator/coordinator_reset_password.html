{% extends 'partials/layout.html' %}

{% load static %} {% load crispy_forms_tags%}

{% block title %}
<title>Reset Password</title>
{% endblock %}

{%block links %}
<script src="{% static 'accounts/js/message_hider.js' %}"></script>
{% if my_messages %}
<script>
    location.href = "#message"
</script>
{% endif %}
{% endblock %}

{% block userinfo %}
{% include 'partials/userinfo.html' %}
{% endblock %}

{%block content%}
<div class="card shadow rounded bulkCard">
    <h2 class="mb-4">Reset Password</h2>
    <div class="col-md-12 mb-4 p-0">
        <h6 class="mb-3"><b>Step 1:</b> Enter Teacher/Parent/Student's username whose password needs to be reset</h6>
        <form action="" method="POST">
            {% csrf_token %}
            <div class="row justify-content-md-center">
                <div class="col-md-12">
                    {{ form.username|as_crispy_field }}
                </div>
            </div>
            <button type="submit" class="btn btn-warning btnmedium"><i class="fa fa-sync mr-1" aria-hidden="true"></i> Reset</button>
        </form>
        <div id="message">
            {% if my_messages %}
                {% if my_messages.error %}
                    <div class="mb-0 mt-2 alert alert-danger" role="alert">
                        {{ my_messages.error }}
                    </div>
                {% endif %}
                {% if my_messages.success %}
                    <div class="mb-0 mt-2 alert alert-success" role="alert">
                        {{ my_messages.success }}
                    </div>
                {% endif %}
            {% endif %}
        </div>
    </div>
    <div class="col-md-12 p-0">
        <h6 class="mb-3"><b>Step 2:</b> Download Login Credentials</h6>
        <div class="dropdown">
            <button style="color:white;" class="btn btn-info btnmedium dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-download mr-1" aria-hidden="true"></i> Login Credentials </button>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                <form action="{% url 'accounts:download_data'%}">
                    <button class="dropdown-item" type="submit">Teachers</button>
                </form>
                <form action="{% url 'accounts:download_data'%}">
                    <button class="dropdown-item" type="submit">Parents</button>
                </form>
                <form action="{% url 'accounts:download_data'%}">
                    <button class="dropdown-item" type="submit">Students</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}